name: Build EXE for tackle_tool

on:
  workflow_dispatch:     # å…è®¸æ‰‹åŠ¨è§¦å‘
  push:
    branches: [ main ]   # æˆ–æ¨é€åˆ° main åˆ†æ”¯æ—¶è‡ªåŠ¨è§¦å‘

jobs:
  build:
    runs-on: windows-latest

    steps:
    - name: ğŸ§¾ æ£€å‡ºä»“åº“ä»£ç 
      uses: actions/checkout@v3

    - name: ğŸ è®¾ç½® Python ç¯å¢ƒ
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'

    - name: ğŸ“¦ å®‰è£…ä¾èµ–
      run: |
        pip install -r requirements.txt
        pip install pyinstaller PyPDF2

    - name: ğŸ› ï¸ ä½¿ç”¨ PyInstaller æ‰“åŒ…æˆ EXE
      run: |
        pyinstaller --onefile --name tackle_tool tackle.py

    - name: ğŸ“¤ ä¸Šä¼  EXE å¯æ‰§è¡Œæ–‡ä»¶
      uses: actions/upload-artifact@v3
      with:
        name: tackle_tool_exe
        path: dist/tackle_tool.exe